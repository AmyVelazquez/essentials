<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Your Page Title</title>
    <meta name="description" content="Description of your webpage" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <!-- NAV BAR -->
    </header>

    <main class="customerContactForm">
      <h1 class="h1Font">Have a question? We have answers.</h1>
      <p class="bodyFont">
        Have a question about our services?
        <br /><br />
        Is there a problem we can help you resolve?
        <br /><br />
        Would you like
        <strong>
          Jared Spool to give a private workshop or a presentation</strong
        >
        to your team?
        <br /><br />
        We’d love to hear from you. Let us know how we can help.
      </p>
      <p>
        We’ll answer as quickly as we can. We’re a small team that works from
        <strong> 8:30 am to 5:30 pm </strong> U.S. Eastern Time on
        <strong> Monday through Friday.</strong>
      </p>
      <p>
        It may take us until our next business day to get an answer to you. Rest
        assured, we will respond to every message we get.
      </p>

      <form id="contact_form">
         <input
          type="text"
          placeholder="First Name *"
          id="fname_input"
          class="formInput"
          required
        />
        <input
          type="text"
          placeholder="Last Name *"
          id="lname_input"
          class="formInput"
          required
        />
        <input
          type="email"
          placeholder="Email *"
          id="email_input"
          class="formInput"
          required
        />

        <div>
          <select name="topic" id="topic_select" class="formInput">
            <option value="Center Centre or Leaders of Awesomeness" 
            class="option">
              Center Centre or Leaders of Awesomeness
            </option>
            <option value="Jared presentation" class="option">
              I’m interested in Jared presenting to my team
            </option>
            <option value="WIN program" class="option">
              How to Win Stakeholders & Influence Decisions program
            </option>
            <option value="Agile UX intensive" class="option">
              Taking Control of Agile UX Intensive
            </option>
            <option value="UX Metrics" class="option">
              UX Metrics Your Stakeholders Can’t Ignore Intensive
            </option>
            <option value="Research intensive" class="option">
              Advanced Approaches to UX Research Intensive
            </option>
            <option value="Essentials" class="option">UX Strategy Essentials Series</option>
            <option value="Other" class="option">I’m not sure</option>
          </select>
        </div>

        <textarea
          placeholder="Message*"
          id="message_input"
          class="formInput"
          required
        ></textarea>

        <button type="submit" id="submit_button" class="boxShadow">
          Submit message
        </button>
      </form>

      <script>
        const form = document.getElementById("contact_form");
        form.addEventListener("submit", async (e) => {
          e.preventDefault();

          const formData = {
            first_name: document.getElementById("fname_input").value.trim(),
            last_name: document.getElementById("lname_input").value.trim(),
            email: document.getElementById("email_input").value.trim(),
            topic: document.getElementById("topic_select").value.trim(),
            message: document.getElementById("message_input").value.trim(),
            zendesk_subject_line: `${document
              .getElementById("fname_input")
              .value.trim()} ${document
              .getElementById("lname_input")
              .value.trim()} has a question about ${document
              .getElementById("topic_select")
              .value.trim()}`,
          };

          try {
            const req = await fetch(
              "https://hooks.zapier.com/hooks/catch/9280923/3zdcbrw/",
              { method: "POST", body: JSON.stringify(formData) }
            );

            const res = await req.json();

            if (req.ok) {
              document.getElementById("contact_form").style.display = "none";

              const successMessage = document.createElement("p");
              successMessage.innerText =
                "Your question was successfully submitted! We will get back to you as soon as possible.";
              successMessage.style.marginTop = "100px";
              successMessage.style.color = "green";
              successMessage.style.fontWeight = "900";

              const paragraphs = document.querySelectorAll("p");
              const lastParagraph = paragraphs[paragraphs.length - 1];

              lastParagraph.after(successMessage);
            } else {
              alert("There was an error while submitting the form");
            }
          } catch (err) {
            console.log(err);
            alert("There was an error while submitting the form");
          }
        });
      </script>
    </main>

    <footer>
      <!-- FOOTER -->
    </footer>
  </body>
</html>
